##Cache模式
###特征
* key-value Map
* 线程安全
* 插入后一段时间后过期
* 一段时间未访问过期
* 可设置过期通知
* 可设置缓存最大容量

###优势
* 缓存数据库、接口调用结果。减少数据库和接口调用次数。性能大幅提升。
* 缓存中可进行累积。不必数据库update，性能提升。

###劣势
* 一致性一定程度遭到破坏。特别是分布式系统中的本地缓存。更新缓存数据不会马上作用于数据库，其他系统访问数据库数据将不一致。
* 即使分布式系统使用统一缓存，如果有系统调用数据库便不能保证一致性。
* 缓存机器一旦崩溃，则数据不可恢复。

###弥补
* 超过过期时间的缓存项回写数据库。保证一定一致性，和数据安全性。
* 超过过期时间的缓存项失效，从新从数据库读取，保证数据一致性。

###易错误点
* 只读缓存需设置失效时间，保证与数据库一致性。
* 可写的local缓存定期回写数据库时，与其他系统local缓存回写冲突，出现数据覆盖错乱的情况。这种情况建议使用分布式外部统一缓存，或者将业务水平拆分，同一key总落于同一机器处理。
* 静态数据缓存，数据量小可永久有效，数据量大设置适当缓存最大容量，并设置一段时间未访问的过期时间，长时间未被访问的缓存项失效。

###缓存实现
* 本地缓存：guava-cache
* 分布式缓存：redis、memcache